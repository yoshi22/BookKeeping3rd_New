const fs = require("fs");
const path = require("path");

// 第2問（Q_L_031〜Q_L_040）理論・選択問題の修正スクリプト
const filePath = path.join(__dirname, "../src/data/master-questions.ts");

const corrections = [
  {
    id: "Q_L_031",
    question_text:
      "【理論問題：簿記の基本原理と記帳体系】\\n\\n以下の説明文の空欄に入る適切な語句を選択してください。\\n\\n簿記は（ア）簿記の原理に基づいて、すべての取引を（イ）と（ウ）の2つの側面から記録する。\\nこの方法により、常に（エ）が保たれ、記録の正確性を検証できる。\\n\\n【選択肢】\\nA. 複式\\nB. 借方\\nC. 貸方\\nD. 貸借平均の原理\\n\\n【解答形式】\\n各空欄に対して、最も適切な選択肢を選んでください。",
    correct_answer_json: JSON.stringify({
      answers: { a: "A", b: "B", c: "C", d: "D" },
      correctText: {
        a: "複式",
        b: "借方",
        c: "貸方",
        d: "貸借平均の原理",
      },
    }),
    explanation:
      "【複式簿記の基本原理】\\n1. 複式簿記：すべての取引を二面的に記録\\n2. 借方と貸方：左側（借方）と右側（貸方）への記入\\n3. 貸借平均の原理：借方合計＝貸方合計\\n4. 記録の検証可能性を確保\\n\\n【重要性】\\n複式簿記により、財産状態と経営成績を同時に把握可能",
  },
  {
    id: "Q_L_032",
    question_text:
      "【理論問題：仕訳の原則と借方・貸方の理解】\\n\\n以下の説明文の空欄に入る適切な語句を選択してください。\\n\\n資産の増加は（ア）に、負債の増加は（イ）に記入する。\\n収益の発生は（ウ）に、費用の発生は（エ）に記入する。\\n\\n【選択肢】\\nA. 借方\\nB. 貸方\\nC. 借方\\nD. 貸方\\n\\n【解答形式】\\n各空欄に対して、最も適切な選択肢を選んでください。",
    correct_answer_json: JSON.stringify({
      answers: { a: "A", b: "B", c: "D", d: "C" },
      correctText: {
        a: "借方",
        b: "貸方",
        c: "貸方",
        d: "借方",
      },
    }),
    explanation:
      "【仕訳の原則】\\n1. 資産の増加→借方（左）\\n2. 負債の増加→貸方（右）\\n3. 純資産の増加→貸方（右）\\n4. 収益の発生→貸方（右）\\n5. 費用の発生→借方（左）\\n\\n【覚え方】\\n「資産・費用は借方」「負債・純資産・収益は貸方」",
  },
  {
    id: "Q_L_033",
    question_text:
      "【理論問題：帳簿組織と補助簿の役割】\\n\\n以下の説明文の空欄に入る適切な語句を選択してください。\\n\\n（ア）は、すべての取引を仕訳帳に記入し、（イ）に転記する主要簿である。\\n一方、（ウ）や（エ）などの補助簿は、特定の取引を詳細に記録する。\\n\\n【選択肢】\\nA. 仕訳帳\\nB. 総勘定元帳\\nC. 現金出納帳\\nD. 売掛金元帳\\n\\n【解答形式】\\n各空欄に対して、最も適切な選択肢を選んでください。",
    correct_answer_json: JSON.stringify({
      answers: { a: "A", b: "B", c: "C", d: "D" },
      correctText: {
        a: "仕訳帳",
        b: "総勘定元帳",
        c: "現金出納帳",
        d: "売掛金元帳",
      },
    }),
    explanation:
      "【帳簿組織の体系】\\n1. 主要簿：仕訳帳・総勘定元帳\\n2. 補助簿：補助記入帳・補助元帳\\n3. 補助記入帳：現金出納帳、売上帳、仕入帳等\\n4. 補助元帳：売掛金元帳、買掛金元帳等\\n\\n【役割分担】\\n主要簿で全体を把握、補助簿で詳細を管理",
  },
  {
    id: "Q_L_034",
    question_text:
      "【理論問題：伝票制度の種類と特徴】\\n\\n以下の説明文の空欄に入る適切な語句を選択してください。\\n\\n3伝票制では、（ア）伝票、（イ）伝票、振替伝票の3種類を使用する。\\n5伝票制では、さらに（ウ）伝票と（エ）伝票が追加される。\\n\\n【選択肢】\\nA. 入金\\nB. 出金\\nC. 売上\\nD. 仕入\\n\\n【解答形式】\\n各空欄に対して、最も適切な選択肢を選んでください。",
    correct_answer_json: JSON.stringify({
      answers: { a: "A", b: "B", c: "C", d: "D" },
      correctText: {
        a: "入金",
        b: "出金",
        c: "売上",
        d: "仕入",
      },
    }),
    explanation:
      "【伝票制度の比較】\\n■3伝票制\\n・入金伝票：現金収入\\n・出金伝票：現金支出\\n・振替伝票：現金以外\\n\\n■5伝票制\\n・上記3種類＋売上伝票＋仕入伝票\\n・売上と仕入を専用伝票で効率化",
  },
  {
    id: "Q_L_035",
    question_text:
      "【理論問題：試算表の種類と作成目的】\\n\\n以下の説明文の空欄に入る適切な語句を選択してください。\\n\\n（ア）試算表は借方合計と貸方合計を表示し、（イ）試算表は借方残高と貸方残高を表示する。\\n（ウ）試算表は両者を組み合わせたもので、最も情報量が多い。\\n試算表の主な目的は（エ）の検証である。\\n\\n【選択肢】\\nA. 合計\\nB. 残高\\nC. 合計残高\\nD. 転記の正確性\\n\\n【解答形式】\\n各空欄に対して、最も適切な選択肢を選んでください。",
    correct_answer_json: JSON.stringify({
      answers: { a: "A", b: "B", c: "C", d: "D" },
      correctText: {
        a: "合計",
        b: "残高",
        c: "合計残高",
        d: "転記の正確性",
      },
    }),
    explanation:
      "【試算表の種類と特徴】\\n1. 合計試算表：各勘定の借方・貸方合計を表示\\n2. 残高試算表：各勘定の残高のみ表示\\n3. 合計残高試算表：合計と残高の両方を表示\\n\\n【作成目的】\\n・転記の正確性検証\\n・貸借平均の確認\\n・財務諸表作成の準備",
  },
  {
    id: "Q_L_036",
    question_text:
      "【理論問題：決算整理の意義と手続き】\\n\\n以下の説明文の空欄に入る適切な語句を選択してください。\\n\\n決算整理では、（ア）の原則に従い収益と費用を適切な期間に配分する。\\n（イ）は次期に繰り越す商品の金額を、（ウ）は使用により価値が減少した固定資産の金額を調整する。\\n（エ）は回収不能と見込まれる債権に対して設定する。\\n\\n【選択肢】\\nA. 発生主義\\nB. 棚卸\\nC. 減価償却\\nD. 貸倒引当金\\n\\n【解答形式】\\n各空欄に対して、最も適切な選択肢を選んでください。",
    correct_answer_json: JSON.stringify({
      answers: { a: "A", b: "B", c: "C", d: "D" },
      correctText: {
        a: "発生主義",
        b: "棚卸",
        c: "減価償却",
        d: "貸倒引当金",
      },
    }),
    explanation:
      "【主要な決算整理事項】\\n1. 発生主義の適用：収益・費用の期間配分\\n2. 商品棚卸：期末商品の評価\\n3. 減価償却：固定資産の価値減少\\n4. 貸倒引当金：債権の回収リスク評価\\n5. 経過勘定：前払・未払・前受・未収の調整",
  },
  {
    id: "Q_L_037",
    question_text:
      "【理論問題：財務諸表の構成要素】\\n\\n以下の説明文の空欄に入る適切な語句を選択してください。\\n\\n貸借対照表は（ア）、負債、純資産から構成され、企業の財政状態を表す。\\n損益計算書は（イ）から（ウ）を差し引いて当期純利益を算定する。\\n（エ）は期中の純資産の変動を示す計算書である。\\n\\n【選択肢】\\nA. 資産\\nB. 収益\\nC. 費用\\nD. 株主資本等変動計算書\\n\\n【解答形式】\\n各空欄に対して、最も適切な選択肢を選んでください。",
    correct_answer_json: JSON.stringify({
      answers: { a: "A", b: "B", c: "C", d: "D" },
      correctText: {
        a: "資産",
        b: "収益",
        c: "費用",
        d: "株主資本等変動計算書",
      },
    }),
    explanation:
      "【財務諸表の体系】\\n■貸借対照表（B/S）\\n・資産＝負債＋純資産\\n・財政状態を表示\\n\\n■損益計算書（P/L）\\n・収益－費用＝当期純利益\\n・経営成績を表示\\n\\n■株主資本等変動計算書\\n・純資産の変動内容を詳細表示",
  },
  {
    id: "Q_L_038",
    question_text:
      "【理論問題：勘定科目の分類と体系】\\n\\n以下の説明文の空欄に入る適切な語句を選択してください。\\n\\n勘定科目は大きく5つに分類される。\\n貸借対照表項目は（ア）、（イ）、純資産の3つ、\\n損益計算書項目は（ウ）と（エ）の2つである。\\n\\n【選択肢】\\nA. 資産\\nB. 負債\\nC. 収益\\nD. 費用\\n\\n【解答形式】\\n各空欄に対して、最も適切な選択肢を選んでください。",
    correct_answer_json: JSON.stringify({
      answers: { a: "A", b: "B", c: "C", d: "D" },
      correctText: {
        a: "資産",
        b: "負債",
        c: "収益",
        d: "費用",
      },
    }),
    explanation:
      "【勘定科目の5分類】\\n■貸借対照表項目\\n1. 資産：現金、売掛金、建物等\\n2. 負債：買掛金、借入金等\\n3. 純資産：資本金、利益剰余金等\\n\\n■損益計算書項目\\n4. 収益：売上、受取利息等\\n5. 費用：仕入、給料、減価償却費等",
  },
  {
    id: "Q_L_039",
    question_text:
      "【理論問題：簿記上の取引の定義】\\n\\n以下の説明文の空欄に入る適切な語句を選択してください。\\n\\n簿記上の取引とは、企業の（ア）に増減をもたらす事象をいう。\\n契約の締結は簿記上の取引に（イ）。\\n火災による商品の焼失は簿記上の取引に（ウ）。\\n簿記上の取引は必ず（エ）の原因となる。\\n\\n【選択肢】\\nA. 資産・負債・純資産\\nB. 該当しない\\nC. 該当する\\nD. 仕訳\\n\\n【解答形式】\\n各空欄に対して、最も適切な選択肢を選んでください。",
    correct_answer_json: JSON.stringify({
      answers: { a: "A", b: "B", c: "C", d: "D" },
      correctText: {
        a: "資産・負債・純資産",
        b: "該当しない",
        c: "該当する",
        d: "仕訳",
      },
    }),
    explanation:
      "【簿記上の取引の要件】\\n1. 資産・負債・純資産の増減が発生\\n2. 金額で測定可能\\n3. 企業の経済活動に関連\\n\\n【判定例】\\n・商品売買→取引（○）\\n・契約締結のみ→取引（×）\\n・火災損失→取引（○）\\n・商談→取引（×）",
  },
  {
    id: "Q_L_040",
    question_text:
      "【理論問題：複式簿記の特徴と利点】\\n\\n以下の説明文の空欄に入る適切な語句を選択してください。\\n\\n複式簿記の最大の特徴は、（ア）と（イ）を同時に把握できることである。\\nまた、（ウ）により記録の正確性を自己検証でき、\\n（エ）の作成により利害関係者への情報提供が可能となる。\\n\\n【選択肢】\\nA. 財政状態\\nB. 経営成績\\nC. 貸借平均の原理\\nD. 財務諸表\\n\\n【解答形式】\\n各空欄に対して、最も適切な選択肢を選んでください。",
    correct_answer_json: JSON.stringify({
      answers: { a: "A", b: "B", c: "C", d: "D" },
      correctText: {
        a: "財政状態",
        b: "経営成績",
        c: "貸借平均の原理",
        d: "財務諸表",
      },
    }),
    explanation:
      "【複式簿記の利点】\\n1. 財政状態の把握：貸借対照表で資産・負債・純資産を表示\\n2. 経営成績の把握：損益計算書で収益・費用・利益を表示\\n3. 自己検証機能：貸借平均により誤りを発見\\n4. 情報提供機能：財務諸表により利害関係者へ報告\\n\\n【単式簿記との違い】\\n単式簿記は現金の収支のみ記録、複式簿記は全取引を二面的に記録",
  },
];

// ファイルを読み込み
let content = fs.readFileSync(filePath, "utf8");

// 各問題を修正
corrections.forEach((correction) => {
  // 問題文の修正
  if (correction.question_text) {
    const questionRegex = new RegExp(
      `(id: "${correction.id}"[\\s\\S]*?)question_text:\\s*"[^"]*"`,
      "g",
    );
    content = content.replace(
      questionRegex,
      `$1question_text:\n      "${correction.question_text}"`,
    );
  }

  // 正答データの修正
  const correctAnswerRegex = new RegExp(
    `(id: "${correction.id}"[\\s\\S]*?)correct_answer_json:\\s*'[^']*'`,
    "g",
  );
  content = content.replace(
    correctAnswerRegex,
    `$1correct_answer_json:\n      '${correction.correct_answer_json}'`,
  );

  // 解説の修正
  const explanationRegex = new RegExp(
    `(id: "${correction.id}"[\\s\\S]*?)explanation: "[^"]*"`,
    "g",
  );
  content = content.replace(
    explanationRegex,
    `$1explanation: "${correction.explanation}"`,
  );
});

// ファイルに書き込み
fs.writeFileSync(filePath, content, "utf8");

console.log("✅ Q_L_031〜Q_L_040の修正が完了しました");
console.log("修正内容:");
console.log("- 重複していた問題文を個別の理論問題に修正");
console.log("- 正答データを適切な選択肢形式に修正");
console.log("- 解説を詳細な内容に更新");
